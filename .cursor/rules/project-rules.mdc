---
description: "MyDHL 고객사 시스템 개발을 위한 전역 프로젝트 규칙 및 기술 스택 가이드"
globs: 
  - "**/*.ts"
  - "**/*.tsx"
  - "**/*.md"
  - "**/*.json"
alwaysApply: true
---

## 1. Project Overview

- 목표: MyDHL API를 연동하여 운송장 생성, 조회, 픽업 요청 등 DHL 서비스를 쉽고 직관적으로 제공하는 웹 애플리케이션 개발
- User Experience: 사용자가 직관적으로 이용할 수 있는 Frontend 구현
- Robustness: 런타임 데이터 검증 및 철저한 예외 처리
- Stability: DHL 서버와의 통신 안정성 확보

## 2. Tech Stack

- Framework: Next.js 16 (App Router)
- Language: TypeScript (Strict 모드 필수)
- Styling: Tailwind CSS + Shadcn/ui
- Backend/Auth: Supabase (Auth, DB)
- State/Cache: TanStack Query (API 데이터 캐싱 및 상태 관리)
- Validation: Zod (런타임 데이터 검증)
- AI: AI SDK (AI 모델은 `Gemini 3 Flash Preview` 모델 사용)
- Linting: ESLint (Next/TS 규칙)

## 3. Coding Standards

- Component: 함수형 컴포넌트(`function`) 또는 화살표 함수(`const = () =>`) 일관성 유지
- Naming: 컴포넌트 파일명은 `PascalCase`, 서비스 이름, DB 칼럼명은 `snake_case` 사용, API 응답 필드는 `camelCase` 사용
- 모든 함수/컴포넌트 상단에 한글 개요 한 문장 필수 작성, 모든 코드 라인에 명확하고 간결한 한국어 주석 작성
- 복잡한 로직은 JSDoc을 활용해 한글로 상세 설명 기술
- Commits: Conventional Commits 준수 (예: `feat: 운송장 생성 기능 추가`, `fix: 주소 검증 오류 수정`)
- 함수명과 변수명은 Swagger의 `operationId`와 `propertyName`을 기반으로 가독성 있게 작성
- 현대적인 Next.js syntax와 최신 라이브러리(Zod v3+, Lucide icons 등)를 사용

## 4. API Integration & Next.js App Router

- 모든 MyDHL API 요청 및 응답 데이터의 규격은 프로젝트 내 `docs/mydhl-api-2.9.0-swagger.yaml` 파일을 최우선으로 참고하여 REST 방식으로 요청
- 국가 코드, 패키지 타입 등 고정 데이터 값은 `docs/MyDHL API Reference data guide (3.1.2).pdf`를 최우선으로 참고
- Rate Limiting: 짧은 시간 내에 비정상적으로 많은 API가 호출되지 않도록 모든 API 연동에 호출 제한 로직 설정
- Server Actions: 내부 폼 제출 및 보안이 필요한 DHL API 호출에 우선 사용한다. (`"use server"` 필수)
- Route Handlers: 외부 연동용 엔드포인트가 필요한 경우 `app/api/` 경로에 작성한다.
- Error Handling: MyDHL API의 에러 응답(`supermodelIoLogisticsExpressErrorResponse`) 형식을 준수하여 클라이언트에 명확한 한국어 에러 메시지를 반환한다.

## 5. Zod & TypeScript

- 모든 외부 데이터 입력(Request Body, Query Params)은 `Zod`를 사용하여 검증
- Zod 스키마 정의 시 Swagger의 `minLength`, `maxLength`, `pattern`, `enum`, `multipleOf` 제약 조건을 엄격하게 반영
- `z.infer<typeof schema>`를 활용하여 TypeScript 타입을 생성하고, 수동 타입 선언은 지양
- 스키마 파일은 `@/lib/validations/` 폴더 아래에 기능별로 관리 (예: `shipment.ts`).

## 6. Frontend Design & UI/UX Strategy

- 디자인 컨셉: `docs/apple.png`, `apple2.png`를 분석하여 Apple 공식 홈페이지의 'Premium Minimalist' 스타일 구현
- Typography: `Inter` 또는 시스템 산세리프 폰트를 사용하며, 자간(letter-spacing)을 미세하게 좁히고 행간을 넓혀 가독성 높이기
- Spacing: 요소 간 여백을 충분히 두어(Negative Space) 답답함을 없애고, 정보의 위계(Hierarchy)를 명확히 표현
- Effects: 부드러운 라운드 코너(border-radius: 12px~20px), 매우 연한 그림자(Soft Shadow), 유리 느낌의 배경(Glassmorphism: backdrop-blur) 활용
- 인터렉션: 모든 버튼과 링크에는 부드러운 전환 효과(`transition: all 0.3s ease`)를 적용하여 매끄러운 사용자 경험 제공